<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Palindrome Checker</title>
  <style>
    :root{--bg:#0f1722;--card:#0b1220;--muted:#94a3b8;--accent:#7c3aed;--success:#22c55e;--danger:#ef4444}
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;min-height:100vh;margin:0;background:linear-gradient(180deg,#071022 0%,#081226 60%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:820px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:14px;padding:22px;box-shadow:0 10px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    h1{margin:0 0 6px;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:10px;margin-top:14px;align-items:center;flex-wrap:wrap}
    .input-wrap{display:flex;gap:10px;width:100%}
    input[type="text"]{flex:1;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:15px;outline:none}
    button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}

    .options{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:13px}
    label.opt{display:inline-flex;gap:8px;align-items:center}
    input[type=checkbox]{width:16px;height:16px}

    .result{display:flex;gap:12px;align-items:center;margin-top:18px}
    .badge{padding:8px 12px;border-radius:999px;font-weight:700}
    .badge.true{background:linear-gradient(90deg,rgba(34,197,94,0.14),rgba(34,197,94,0.08));color:var(--success);border:1px solid rgba(34,197,94,0.12)}
    .badge.false{background:linear-gradient(90deg,rgba(239,68,68,0.08),rgba(239,68,68,0.04));color:var(--danger);border:1px solid rgba(239,68,68,0.08)}
    .details{color:var(--muted);font-size:13px}

    .examples{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
    .chip{background:rgba(255,255,255,0.02);padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);cursor:pointer;font-size:13px}

    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:18px;color:var(--muted);font-size:13px}

    pre.debug{margin-top:14px;padding:12px;border-radius:8px;background:rgba(255,255,255,0.02);color:var(--muted);font-size:13px;overflow:auto}

    @media (max-width:560px){.controls{flex-direction:column}.input-wrap{flex-direction:column}button{width:100%}}
  </style>
</head>
<body>
  <main class="card" role="main">
    <header>
      <h1>Palindrome Checker</h1>
      <p class="lead">Type a word, phrase or sentence and the checker will tell you if it's a palindrome. Toggle options below to control behavior.</p>
    </header>

    <section class="controls" aria-label="controls">
      <div class="input-wrap">
        <input id="textInput" type="text" placeholder="Enter text to check — e.g. A man, a plan, a canal: Panama" aria-label="Text to check">
        <button id="checkBtn">Check</button>
        <button id="clearBtn" class="ghost">Clear</button>
      </div>

      <div class="options" role="group" aria-label="options">
        <label class="opt"><input id="ignoreNonAlnum" type="checkbox" checked> Ignore non-alphanumeric</label>
        <label class="opt"><input id="caseSensitive" type="checkbox"> Case sensitive</label>
        <label class="opt" title="Check as you type"><input id="liveCheck" type="checkbox" checked> Live</label>
      </div>
    </section>

    <section class="result" aria-live="polite">
      <div id="badge" class="badge" style="display:none">—</div>
      <div class="details" id="details">No check yet.</div>
    </section>

    <section class="examples" aria-label="examples">
      <div class="chip" data-val="racecar">racecar</div>
      <div class="chip" data-val="A man, a plan, a canal: Panama">A man, a plan, a canal: Panama</div>
      <div class="chip" data-val="No lemon, no melon">No lemon, no melon</div>
      <div class="chip" data-val="hello">hello</div>
      <div class="chip" data-val="Was it a car or a cat I saw">Was it a car or a cat I saw</div>
    </section>

    <div class="footer">
      <div>Quick actions</div>
      <div style="display:flex;gap:8px">
        <button id="downloadBtn" class="ghost">Download HTML</button>
        <button id="copyBtn" class="ghost">Copy result</button>
      </div>
    </div>

    <pre id="debug" class="debug" style="display:none"></pre>
  </main>

  <script>
    // Utility: normalize and filter according to options
    function normalizeText(s, {ignoreNonAlnum = true, caseSensitive = false} = {}){
      if (!caseSensitive) s = s.toLowerCase();
      if (ignoreNonAlnum) {
        // keep unicode letters and digits: use \p{L}\p{N} with u flag
        try{
          s = s.replace(/[^\p{L}\p{N}]/gu, '');
        }catch(e){
          // fallback for older engines
          s = s.replace(/[^0-9A-Za-z]/g, '');
        }
      }
      return s;
    }

    function isPalindromeRaw(s, opts){
      const t = normalizeText(s, opts);
      let i = 0, j = t.length - 1;
      while(i < j){
        if (t[i] !== t[j]) return {result:false, normalized:t};
        i++; j--;
      }
      return {result:true, normalized:t};
    }

    // DOM refs
    const input = document.getElementById('textInput');
    const checkBtn = document.getElementById('checkBtn');
    const clearBtn = document.getElementById('clearBtn');
    const badge = document.getElementById('badge');
    const details = document.getElementById('details');
    const ignoreNonAlnum = document.getElementById('ignoreNonAlnum');
    const caseSensitive = document.getElementById('caseSensitive');
    const liveCheck = document.getElementById('liveCheck');
    const chips = document.querySelectorAll('.chip');
    const debug = document.getElementById('debug');
    const downloadBtn = document.getElementById('downloadBtn');
    const copyBtn = document.getElementById('copyBtn');

    function updateUIForResult(res, original){
      if (res === null){
        badge.style.display = 'none';
        details.textContent = 'No check yet.';
        return;
      }
      badge.style.display = 'inline-block';
      if (res.result){
        badge.className = 'badge true';
        badge.textContent = 'Palindrome ✓';
        details.textContent = `Normalized: "${res.normalized}" — length ${res.normalized.length}`;
      } else {
        badge.className = 'badge false';
        badge.textContent = 'Not a palindrome ✕';
        details.textContent = `Normalized: "${res.normalized}" — mismatch found.`;
      }
    }

    function runCheck(){
      const opts = {ignoreNonAlnum: ignoreNonAlnum.checked, caseSensitive: caseSensitive.checked};
      const value = input.value || '';
      if (value.trim() === ''){
        updateUIForResult(null);
        return null;
      }
      const r = isPalindromeRaw(value, opts);
      updateUIForResult(r, value);
      return r;
    }

    checkBtn.addEventListener('click', runCheck);
    clearBtn.addEventListener('click', ()=>{input.value=''; runCheck(); input.focus();});

    input.addEventListener('input', ()=>{ if (liveCheck.checked) runCheck(); });
    ignoreNonAlnum.addEventListener('change', runCheck);
    caseSensitive.addEventListener('change', runCheck);

    chips.forEach(c=>{
      c.addEventListener('click', ()=>{
        input.value = c.dataset.val;
        runCheck();
      })
    });

    // Copy result text to clipboard
    copyBtn.addEventListener('click', async ()=>{
      const r = runCheck();
      const out = r === null ? 'No input' : (r.result ? 'Palindrome' : 'Not a palindrome') + ` — normalized: "${r.normalized}"`;
      try{ await navigator.clipboard.writeText(out); copyBtn.textContent='Copied ✓'; setTimeout(()=>copyBtn.textContent='Copy result',1200);}catch(e){ alert('Copy failed — your browser may block clipboard access.'); }
    });

    // Download the current page as an HTML file
    downloadBtn.addEventListener('click', ()=>{
      const blob = new Blob([document.documentElement.outerHTML], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'palindrome-checker.html';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // Keyboard shortcut: Enter to check when focus on input
    input.addEventListener('keydown', (ev)=>{ if (ev.key === 'Enter') { ev.preventDefault(); runCheck(); } });

    // Optional debug toggle (double-click badge)
    badge.addEventListener('dblclick', ()=>{
      debug.style.display = debug.style.display==='none' ? 'block' : 'none';
      if (debug.style.display==='block'){
        const opts = {ignoreNonAlnum: ignoreNonAlnum.checked, caseSensitive: caseSensitive.checked};
        const r = isPalindromeRaw(input.value || '', opts);
        debug.textContent = JSON.stringify({input: input.value, options: opts, result: r}, null, 2);
      }
    });

    // initial example
    input.value = '';
    runCheck();
  </script>
</body>
</html>
